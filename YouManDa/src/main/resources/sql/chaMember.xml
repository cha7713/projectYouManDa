<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">


	<insert id="join" parameterType="map">
		insert into `member` (id, pw,
		name, address, email,school,phonenum,passnum,sex,birthday,nick,lang)
		values
		(#{id},(HEX(AES_ENCRYPT(#{pw},
		'hgr'))),#{name},#{address},#{email},#{school},#{phonenum},#{passnum},#{sex},#{birthday},#{nick},#{lang})
	</insert>

	<select id="dup" parameterType="string" resultType="string">
		select name
		from `member` where id =
		#{value}
	</select>

	<select id="dupEmail" parameterType="string" resultType="string">
		select
		name
		from `member` where email =
		#{value}
	</select>

	<select id="dupNick" parameterType="string" resultType="string">
		select
		name
		from `member` where nick =
		#{value}
	</select>

	<select id="login" parameterType="map" resultType="map">
		select * from `member` where id = #{id} and pw = (HEX(AES_ENCRYPT(#{pw},
		'hgr')))
	</select>

</mapper>