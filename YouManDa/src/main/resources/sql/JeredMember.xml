<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="JeredMember">

	<!-- //////////////////////////////// Mypage Mapper  /////////////////////////////// -->
	<!-- 자신의 개인정보를 조회 // resultType => 결과, parameterType => 입력-->
	<select id="selectMyinfo" resultType="map" parameterType="map">
		SELECT 
		 id, lang, email, school, address, phonenum, passnum, sex, name, birthday, nick
		 FROM `MEMBER`
		 WHERE id = #{id}
	</select>
	
	
	<!-- 회원정보 수정 -->
 	<update id="updateMyinfo" parameterType="map">
		UPDATE `MEMBER` SET
			email=#{email}, school=#{school}, address=#{address}, phonenum=#{phonenum}, name=#{name}, nick=#{nick}
			WHERE id = #{id}
	</update>
	
	
	<!-- 회원 탈퇴 -->
	<delete id="deleteMyAccount" parameterType="map">
		DELETE FROM `MEMBER`
		 WHERE id = #{id}		
	</delete>
	
	<!-- ////////////////////////////// freeboard Mapper ///////////////////////////////// -->
	
	<select id="selectFreeBoardList" resultType="map" parameterType="map">
		SELECT
		 bnum, header, title, id, bdate ,hit, recomend
		 FROM `freeboard`
		 ORDER BY bnum DESC
	</select>
	
	<insert id="insertFreeBoard" parameterType="map">
		INSERT INTO `freeboard`
		 ( header,title, content, bdate,  hit, recomend, id, lang, lnum)
		 VALUES
		 ( #{header},#{title}, #{content}, NOW(),  0, 0, #{id}, #{lang}, #{lnum})
	</insert>
	<!-- id, lang, lnum -> hidden -->
	
	<select id='selectFreeBoardOne' resultType="map" parameterType="map">
		SELECT 
		 header, title, bdate, id, content, hit, recomend, bnum
		 FROM `freeboard`
		 WHERE bnum=#{bnum}
	</select>
	
	<!-- 게시물 수정 -->
 	<update id="updateFreeBoard" parameterType="map">
		UPDATE `freeboard` SET
			title=#{title}, content=#{content}
			WHERE bnum = #{bnum}
	</update>
	
	<!-- 조회수 증가 -->
	<update id="updateHit" parameterType="_int">
		UPDATE `freeboard` SET
		 hit = hit +1
		 WHERE bnum=#{bnum}
	</update>
	
	<!-- 버튼 클릭시 추천수 증가 -->
	<update id="recommend" parameterType="_int">
		UPDATE `freeboard` SET
		 recomend = recomend +1
		 WHERE bnum=#{bnum}
	</update>
	
	<!-- 댓글 리스트 출력 -->
	<select id="selectreply" parameterType="_int" resultType="map">
		SELECT * FROM `freereply` WHERE bnum=#{value}
	</select>
	
	<!-- 댓글 리스트 출력 -->
<!-- 	<select id="selectreply" parameterType="map" resultType="map"> -->
<!-- 		SELECT * FROM `freereply` WHERE bnum=#{map} ORDER BY ASC -->
<!-- 	</select> -->

	<!-- 댓글 입력 -->
	<insert id="insertreply" parameterType="map">
		INSERT INTO `freereply`
		 (content,bnum,id,lang)
		 VALUES
		 (#{replycontent}, #{bnum}, #{id}, #{lang})		 
	</insert>




</mapper>